<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>220 Sight Words 小遊戲</title>

<style>
body { margin:0; padding:0; background:#fefaf0; font-family:Arial,sans-serif; display:flex; justify-content:center; align-items:center; flex-direction:column; min-height:100vh;}
.mode-bar { position: sticky; top:0; background:#fefaf0; width:100%; padding:10px 5px; display:flex; flex-wrap:wrap; gap:8px; justify-content:center; z-index:10;}
.mode-bar button { padding:8px 14px; font-size:16px; border-radius:8px; border:2px solid #ccc; background:#fff; cursor:pointer;}
.mode-bar button.active { background:#4CAF50; color:#fff; border-color:#4CAF50;}
.game-container { width:100%; padding:20px; box-sizing:border-box; display:flex; flex-direction:column; gap:20px; align-items:center;}
#gameTitle { margin-bottom:20px; text-align:center; color:#333; line-height:1;}
#questionInfo { margin-bottom:10px; font-size:18px; color:#555;}
.question-card { width:98%; min-height:45vh; background:#fff8dc; border:2px solid #e0c676; border-radius:12px; display:flex; justify-content:center; align-items:center; box-shadow:3px 3px 8px rgba(0,0,0,0.15); overflow:hidden;}
.question-card img { max-width:100%; max-height:100%;}
.options-container { width:100%; display:grid; grid-template-columns:repeat(2,1fr); gap:15px; justify-items:center;}
.card { width:40vw; aspect-ratio:2/1; background:#f0f0f0; border-radius:12px; border:2px solid #ccc; font-weight:bold; display:flex; justify-content:center; align-items:center; cursor:pointer; transition:0.2s;}
.card span { width:100%; text-align:center; white-space:nowrap;}
.card:hover { transform:scale(1.05);}
.correct { background:#d4f8d4 !important;}
.wrong { background:#ffd5d5 !important;}
@media (max-width:480px){.card{width:35vw;}}
</style>
</head>

<body>

<div class="mode-bar">
    <button id="btnAll">All</button>
    <button onclick="setMode(1)">Level 1</button>
    <button onclick="setMode(2)">Level 2</button>
    <button onclick="setMode(3)">Level 3</button>
    <button onclick="setMode(4)">Level 4</button>
    <button onclick="setMode(5)">Level 5</button>
    <button onclick="setMode('order')">照順序練習</button>
</div>

<div class="game-container">
    <h1 id="gameTitle">220 Sight Words 小遊戲</h1>
    <div id="questionInfo"></div>
    <div class="question-card" id="question"></div>
    <div class="options-container" id="options"></div>
</div>

<audio id="correctSound"><source src="https://www.soundjay.com/buttons/sounds/button-3.mp3" type="audio/mpeg"></audio>
<audio id="wrongSound"><source src="https://www.soundjay.com/buttons/sounds/button-10.mp3" type="audio/mpeg"></audio>

<script>
// ================= 完整 220 題庫 =================
const questions=[
{img:"220PICTURE/001.jpg",ans:"I"},{img:"220PICTURE/002.jpg",ans:"I"},
{img:"220PICTURE/003.jpg",ans:"a"},{img:"220PICTURE/004.jpg",ans:"and"},
{img:"220PICTURE/005.jpg",ans:"see"},{img:"220PICTURE/006.jpg",ans:"big"},
{img:"220PICTURE/007.jpg",ans:"me"},{img:"220PICTURE/008.jpg",ans:"my"},
{img:"220PICTURE/009.jpg",ans:"we"},{img:"220PICTURE/010.jpg",ans:"you"},
{img:"220PICTURE/011.jpg",ans:"it"},{img:"220PICTURE/012.jpg",ans:"down"},
{img:"220PICTURE/013.jpg",ans:"for"},{img:"220PICTURE/014.jpg",ans:"go"},
{img:"220PICTURE/015.jpg",ans:"in"},{img:"220PICTURE/016.jpg",ans:"is"},
{img:"220PICTURE/017.jpg",ans:"little"},{img:"220PICTURE/018.jpg",ans:"one"},
{img:"220PICTURE/019.jpg",ans:"the"},{img:"220PICTURE/020.jpg",ans:"to"},
{img:"220PICTURE/021.jpg",ans:"up"},{img:"220PICTURE/022.jpg",ans:"away"},
{img:"220PICTURE/023.jpg",ans:"blue"},{img:"220PICTURE/024.jpg",ans:"can"},
{img:"220PICTURE/025.jpg",ans:"come"},{img:"220PICTURE/026.jpg",ans:"here"},
{img:"220PICTURE/027.jpg",ans:"not"},{img:"220PICTURE/028.jpg",ans:"red"},
{img:"220PICTURE/029.jpg",ans:"three"},{img:"220PICTURE/030.jpg",ans:"two"},
{img:"220PICTURE/031.jpg",ans:"yellow"},{img:"220PICTURE/032.jpg",ans:"find"},
{img:"220PICTURE/033.jpg",ans:"funny"},{img:"220PICTURE/034.jpg",ans:"help"},
{img:"220PICTURE/035.jpg",ans:"jump"},{img:"220PICTURE/036.jpg",ans:"look"},
{img:"220PICTURE/037.jpg",ans:"make"},{img:"220PICTURE/038.jpg",ans:"play"},
{img:"220PICTURE/039.jpg",ans:"run"},{img:"220PICTURE/040.jpg",ans:"said"},
{img:"220PICTURE/041.jpg",ans:"where"},{img:"220PICTURE/042.jpg",ans:"all"},
{img:"220PICTURE/043.jpg",ans:"at"},{img:"220PICTURE/044.jpg",ans:"but"},
{img:"220PICTURE/045.jpg",ans:"he"},{img:"220PICTURE/046.jpg",ans:"on"},
{img:"220PICTURE/047.jpg",ans:"she"},{img:"220PICTURE/048.jpg",ans:"that"},
{img:"220PICTURE/049.jpg",ans:"they"},{img:"220PICTURE/050.jpg",ans:"was"},
{img:"220PICTURE/051.jpg",ans:"with"},{img:"220PICTURE/052.jpg",ans:"am"},
{img:"220PICTURE/053.jpg",ans:"be"},{img:"220PICTURE/054.jpg",ans:"did"},
{img:"220PICTURE/055.jpg",ans:"do"},{img:"220PICTURE/056.jpg",ans:"get"},
{img:"220PICTURE/057.jpg",ans:"have"},{img:"220PICTURE/058.jpg",ans:"out"},
{img:"220PICTURE/059.jpg",ans:"so"},{img:"220PICTURE/060.jpg",ans:"there"},
{img:"220PICTURE/061.jpg",ans:"what"},{img:"220PICTURE/062.jpg",ans:"are"},
{img:"220PICTURE/063.jpg",ans:"came"},{img:"220PICTURE/064.jpg",ans:"like"},
{img:"220PICTURE/065.jpg",ans:"no"},{img:"220PICTURE/066.jpg",ans:"now"},
{img:"220PICTURE/067.jpg",ans:"ride"},{img:"220PICTURE/068.jpg",ans:"this"},
{img:"220PICTURE/069.jpg",ans:"went"},{img:"220PICTURE/070.jpg",ans:"will"},
{img:"220PICTURE/071.jpg",ans:"yes"},{img:"220PICTURE/072.jpg",ans:"brown"},
{img:"220PICTURE/073.jpg",ans:"four"},{img:"220PICTURE/074.jpg",ans:"good"},
{img:"220PICTURE/075.jpg",ans:"into"},{img:"220PICTURE/076.jpg",ans:"pretty"},
{img:"220PICTURE/077.jpg",ans:"ran"},{img:"220PICTURE/078.jpg",ans:"saw"},
{img:"220PICTURE/079.jpg",ans:"too"},{img:"220PICTURE/080.jpg",ans:"want"},
{img:"220PICTURE/081.jpg",ans:"well"},{img:"220PICTURE/082.jpg",ans:"ate"},
{img:"220PICTURE/083.jpg",ans:"black"},{img:"220PICTURE/084.jpg",ans:"eat"},
{img:"220PICTURE/085.jpg",ans:"must"},{img:"220PICTURE/086.jpg",ans:"new"},
{img:"220PICTURE/087.jpg",ans:"our"},{img:"220PICTURE/088.jpg",ans:"please"},
{img:"220PICTURE/089.jpg",ans:"say"},{img:"220PICTURE/090.jpg",ans:"soon"},
{img:"220PICTURE/091.jpg",ans:"under"},{img:"220PICTURE/092.jpg",ans:"white"},
{img:"220PICTURE/093.jpg",ans:"who"}
];

// Level 範圍
const levelRanges={1:[0,41],2:[42,93],3:[94,134],4:[135,180],5:[181,221]};

// ================= 遊戲邏輯 =================
let currentQuestions=[],pool=[],index=0,orderMode=false;
const correctSound=document.getElementById("correctSound");
const wrongSound=document.getElementById("wrongSound");

function fitText(el){let h=el.parentElement.clientHeight*0.8;el.style.fontSize=h+"px";while(el.scrollWidth>el.parentElement.clientWidth&&h>10){h--;el.style.fontSize=h+"px";}}
function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}}

function setMode(mode){
    document.querySelectorAll(".mode-bar button").forEach(b=>b.classList.remove("active"));
    if(mode==="all"){document.getElementById("btnAll").classList.add("active"); currentQuestions=[...questions];shuffle(currentQuestions);}
    else if(mode==="order"){currentQuestions=[...questions];orderMode=true;}
    else {const [start,end]=levelRanges[mode];currentQuestions=questions.slice(start,end+1);shuffle(currentQuestions);}
    index=0; pool=questions.map(q=>q.ans);
    loadCurrent();
}

function loadCurrent(){
    if(index>=currentQuestions.length){alert("題目已完成！"); return;}
    const q=currentQuestions[index];
    document.getElementById("questionInfo").innerText=`題目 ${index+1} / ${currentQuestions.length}`;
    const qc=document.getElementById("question");qc.innerHTML="";
    const img=document.createElement("img");img.src=q.img;qc.appendChild(img);

    const opt=document.getElementById("options");opt.innerHTML="";
    let choices=[q.ans];
    while(choices.length<4){let w=pool[Math.floor(Math.random()*pool.length)];if(!choices.includes(w)) choices.push(w);}
    choices.sort(()=>Math.random()-0.5);

    choices.forEach(w=>{
        const card=document.createElement("div");card.className="card";
        const span=document.createElement("span");span.innerText=w;card.appendChild(span);
        setTimeout(()=>fitText(span),0);
        card.onclick=()=>{
            if(w===q.ans){card.classList.add("correct");span.innerText="⭕"; correctSound.currentTime=0;correctSound.play();
                setTimeout(()=>{index++; loadCurrent();},500);
            }else{card.classList.add("wrong");span.innerText="❌"; wrongSound.currentTime=0;wrongSound.play();}
        };
        opt.appendChild(card);
    });
}

window.addEventListener("resize",()=>{document.querySelectorAll(".card span").forEach(fitText);});

// 網頁載入自動 All 模式
window.addEventListener("DOMContentLoaded",()=>{setMode("all");});
</script>

</body>
</html>
